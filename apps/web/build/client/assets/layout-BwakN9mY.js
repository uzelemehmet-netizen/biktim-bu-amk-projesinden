var Qe=t=>{throw TypeError(t)};var Pe=(t,e,s)=>e.has(t)||Qe("Cannot "+s);var n=(t,e,s)=>(Pe(t,e,"read from private field"),s?s.call(t):e.get(t)),h=(t,e,s)=>e.has(t)?Qe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,i)=>(Pe(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),F=(t,e,s)=>(Pe(t,e,"access private method"),s);var ge=(t,e,s,i)=>({set _(r){u(t,e,r,s)},get _(){return n(t,e,i)}});import{r as Ve,o as Je}from"./chunk-4WY6JWTD-C-0XVRoR.js";if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var we=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var st={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},H,je,$e,it=($e=class{constructor(){h(this,H,st);h(this,je,!1)}setTimeoutProvider(t){u(this,H,t)}setTimeout(t,e){return n(this,H).setTimeout(t,e)}clearTimeout(t){n(this,H).clearTimeout(t)}setInterval(t,e){return n(this,H).setInterval(t,e)}clearInterval(t){n(this,H).clearInterval(t)}},H=new WeakMap,je=new WeakMap,$e),Oe=new it;function nt(t){setTimeout(t,0)}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var Te=typeof window>"u"||"Deno"in globalThis;function A(){}function rt(t,e){return typeof t=="function"?t(e):t}function at(t){return typeof t=="number"&&t>=0&&t!==1/0}function ot(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fe(t,e){return typeof t=="function"?t(e):t}function ut(t,e){return typeof t=="function"?t(e):t}function qe(t,e){const{type:s="all",exact:i,fetchStatus:r,predicate:a,queryKey:d,stale:o}=t;if(d){if(i){if(e.queryHash!==xe(d,e.options))return!1}else if(!de(e.queryKey,d))return!1}if(s!=="all"){const f=e.isActive();if(s==="active"&&!f||s==="inactive"&&f)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||a&&!a(e))}function De(t,e){const{exact:s,status:i,predicate:r,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(le(e.options.mutationKey)!==le(a))return!1}else if(!de(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function xe(t,e){return((e==null?void 0:e.queryKeyHashFn)||le)(t)}function le(t){return JSON.stringify(t,(e,s)=>Ce(s)?Object.keys(s).sort().reduce((i,r)=>(i[r]=s[r],i),{}):s)}function de(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>de(t[s],e[s])):!1}var ct=Object.prototype.hasOwnProperty;function We(t,e){if(t===e)return t;const s=Ae(t)&&Ae(e);if(!s&&!(Ce(t)&&Ce(e)))return e;const r=(s?t:Object.keys(t)).length,a=s?e:Object.keys(e),d=a.length,o=s?new Array(d):{};let f=0;for(let P=0;P<d;P++){const g=s?P:a[P],O=t[g],v=e[g];if(O===v){o[g]=O,(s?P<r:ct.call(t,g))&&f++;continue}if(O===null||v===null||typeof O!="object"||typeof v!="object"){o[g]=v;continue}const x=We(O,v);o[g]=x,x===O&&f++}return r===d&&f===r?t:o}function Ae(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ce(t){if(!Ee(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Ee(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ee(t){return Object.prototype.toString.call(t)==="[object Object]"}function ht(t){return new Promise(e=>{Oe.setTimeout(e,t)})}function lt(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?We(t,e):e}function dt(t,e,s=0){const i=[...t,e];return s&&i.length>s?i.slice(1):i}function ft(t,e,s=0){const i=[e,...t];return s&&i.length>s?i.slice(0,-1):i}var Me=Symbol();function Ze(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Me?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var W,G,se,ke,yt=(ke=class extends we{constructor(){super();h(this,W);h(this,G);h(this,se);u(this,se,e=>{if(!Te&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){n(this,G)||this.setEventListener(n(this,se))}onUnsubscribe(){var e;this.hasListeners()||((e=n(this,G))==null||e.call(this),u(this,G,void 0))}setEventListener(e){var s;u(this,se,e),(s=n(this,G))==null||s.call(this),u(this,G,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){n(this,W)!==e&&(u(this,W,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof n(this,W)=="boolean"?n(this,W):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},W=new WeakMap,G=new WeakMap,se=new WeakMap,ke),Xe=new yt;if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}function pt(){let t,e;const s=new Promise((r,a)=>{t=r,e=a});s.status="pending",s.catch(()=>{});function i(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{i({status:"fulfilled",value:r}),t(r)},s.reject=r=>{i({status:"rejected",reason:r}),e(r)},s}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var bt=nt;function gt(){let t=[],e=0,s=o=>{o()},i=o=>{o()},r=bt;const a=o=>{e?t.push(o):r(()=>{s(o)})},d=()=>{const o=t;t=[],o.length&&r(()=>{i(()=>{o.forEach(f=>{s(f)})})})};return{batch:o=>{let f;e++;try{f=o()}finally{e--,e||d()}return f},batchCalls:o=>(...f)=>{a(()=>{o(...f)})},schedule:a,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{r=o}}}var j=gt();if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var ie,N,ne,Le,vt=(Le=class extends we{constructor(){super();h(this,ie,!0);h(this,N);h(this,ne);u(this,ne,e=>{if(!Te&&window.addEventListener){const s=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}}})}onSubscribe(){n(this,N)||this.setEventListener(n(this,ne))}onUnsubscribe(){var e;this.hasListeners()||((e=n(this,N))==null||e.call(this),u(this,N,void 0))}setEventListener(e){var s;u(this,ne,e),(s=n(this,N))==null||s.call(this),u(this,N,e(this.setOnline.bind(this)))}setOnline(e){n(this,ie)!==e&&(u(this,ie,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return n(this,ie)}},ie=new WeakMap,N=new WeakMap,ne=new WeakMap,Le),me=new vt;if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}function mt(t){return Math.min(1e3*2**t,3e4)}function Ye(t){return(t??"online")==="online"?me.isOnline():!0}var Se=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function et(t){let e=!1,s=0,i;const r=pt(),a=()=>r.status!=="pending",d=l=>{var m;if(!a()){const b=new Se(l);v(b),(m=t.onCancel)==null||m.call(t,b)}},o=()=>{e=!0},f=()=>{e=!1},P=()=>Xe.isFocused()&&(t.networkMode==="always"||me.isOnline())&&t.canRun(),g=()=>Ye(t.networkMode)&&t.canRun(),O=l=>{a()||(i==null||i(),r.resolve(l))},v=l=>{a()||(i==null||i(),r.reject(l))},x=()=>new Promise(l=>{var m;i=b=>{(a()||P())&&l(b)},(m=t.onPause)==null||m.call(t)}).then(()=>{var l;i=void 0,a()||(l=t.onContinue)==null||l.call(t)}),Q=()=>{if(a())return;let l;const m=s===0?t.initialPromise:void 0;try{l=m??t.fn()}catch(b){l=Promise.reject(b)}Promise.resolve(l).then(O).catch(b=>{var D;if(a())return;const M=t.retry??(Te?0:3),p=t.retryDelay??mt,c=typeof p=="function"?p(s,b):p,C=M===!0||typeof M=="number"&&s<M||typeof M=="function"&&M(s,b);if(e||!C){v(b);return}s++,(D=t.onFail)==null||D.call(t,s,b),ht(c).then(()=>P()?void 0:x()).then(()=>{e?v(b):Q()})})};return{promise:r,status:()=>r.status,cancel:d,continue:()=>(i==null||i(),r),cancelRetry:o,continueRetry:f,canStart:g,start:()=>(g()?Q():x().then(Q),r)}}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var Z,He,tt=(He=class{constructor(){h(this,Z)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),at(this.gcTime)&&u(this,Z,Oe.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Te?1/0:300*1e3))}clearGcTimeout(){n(this,Z)&&(Oe.clearTimeout(n(this,Z)),u(this,Z,void 0))}},Z=new WeakMap,He);if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var X,re,q,Y,T,fe,ee,E,$,Ge,wt=(Ge=class extends tt{constructor(e){super();h(this,E);h(this,X);h(this,re);h(this,q);h(this,Y);h(this,T);h(this,fe);h(this,ee);u(this,ee,!1),u(this,fe,e.defaultOptions),this.setOptions(e.options),this.observers=[],u(this,Y,e.client),u(this,q,n(this,Y).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,u(this,X,Ie(this.options)),this.state=e.state??n(this,X),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=n(this,T))==null?void 0:e.promise}setOptions(e){if(this.options={...n(this,fe),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Ie(this.options);s.data!==void 0&&(this.setState(Re(s.data,s.dataUpdatedAt)),u(this,X,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&n(this,q).remove(this)}setData(e,s){const i=lt(this.state.data,e,this.options);return F(this,E,$).call(this,{data:i,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),i}setState(e,s){F(this,E,$).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var i,r;const s=(i=n(this,T))==null?void 0:i.promise;return(r=n(this,T))==null||r.cancel(e),s?s.then(A).catch(A):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(n(this,X))}isActive(){return this.observers.some(e=>ut(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Me||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fe(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ot(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=n(this,T))==null||s.continue()}onOnline(){var s;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=n(this,T))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),n(this,q).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(n(this,T)&&(n(this,ee)?n(this,T).cancel({revert:!0}):n(this,T).cancelRetry()),this.scheduleGc()),n(this,q).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||F(this,E,$).call(this,{type:"invalidate"})}async fetch(e,s){var f,P,g,O,v,x,Q,l,m,b,M,p;if(this.state.fetchStatus!=="idle"&&((f=n(this,T))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(n(this,T))return n(this,T).continueRetry(),n(this,T).promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(C=>C.options.queryFn);c&&this.setOptions(c.options)}const i=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(u(this,ee,!0),i.signal)})},a=()=>{const c=Ze(this.options,s),D=(()=>{const V={client:n(this,Y),queryKey:this.queryKey,meta:this.meta};return r(V),V})();return u(this,ee,!1),this.options.persister?this.options.persister(c,D,this):c(D)},o=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:n(this,Y),state:this.state,fetchFn:a};return r(c),c})();(P=this.options.behavior)==null||P.onFetch(o,this),u(this,re,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=o.fetchOptions)==null?void 0:g.meta))&&F(this,E,$).call(this,{type:"fetch",meta:(O=o.fetchOptions)==null?void 0:O.meta}),u(this,T,et({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Se&&c.revert&&this.setState({...n(this,re),fetchStatus:"idle"}),i.abort()},onFail:(c,C)=>{F(this,E,$).call(this,{type:"failed",failureCount:c,error:C})},onPause:()=>{F(this,E,$).call(this,{type:"pause"})},onContinue:()=>{F(this,E,$).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const c=await n(this,T).start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),(x=(v=n(this,q).config).onSuccess)==null||x.call(v,c,this),(l=(Q=n(this,q).config).onSettled)==null||l.call(Q,c,this.state.error,this),c}catch(c){if(c instanceof Se){if(c.silent)return n(this,T).promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw F(this,E,$).call(this,{type:"error",error:c}),(b=(m=n(this,q).config).onError)==null||b.call(m,c,this),(p=(M=n(this,q).config).onSettled)==null||p.call(M,this.state.data,c,this),c}finally{this.scheduleGc()}}},X=new WeakMap,re=new WeakMap,q=new WeakMap,Y=new WeakMap,T=new WeakMap,fe=new WeakMap,ee=new WeakMap,E=new WeakSet,$=function(e){const s=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Tt(i.data,this.options),fetchMeta:e.meta??null};case"success":const r={...i,...Re(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return u(this,re,e.manual?r:void 0),r;case"error":const a=e.error;return{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=s(this.state),j.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),n(this,q).notify({query:this,type:"updated",action:e})})},Ge);function Tt(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ye(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Re(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ie(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,i=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}function Ue(t){return{onFetch:(e,s)=>{var g,O,v,x,Q;const i=e.options,r=(v=(O=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:O.fetchMore)==null?void 0:v.direction,a=((x=e.state.data)==null?void 0:x.pages)||[],d=((Q=e.state.data)==null?void 0:Q.pageParams)||[];let o={pages:[],pageParams:[]},f=0;const P=async()=>{let l=!1;const m=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(e.signal.aborted?l=!0:e.signal.addEventListener("abort",()=>{l=!0}),e.signal)})},b=Ze(e.options,e.fetchOptions),M=async(p,c,C)=>{if(l)return Promise.reject();if(c==null&&p.pages.length)return Promise.resolve(p);const V=(()=>{const J={client:e.client,queryKey:e.queryKey,pageParam:c,direction:C?"backward":"forward",meta:e.options.meta};return m(J),J})(),be=await b(V),{maxPages:he}=e.options,w=C?ft:dt;return{pages:w(p.pages,be,he),pageParams:w(p.pageParams,c,he)}};if(r&&a.length){const p=r==="backward",c=p?Pt:Ke,C={pages:a,pageParams:d},D=c(i,C);o=await M(C,D,p)}else{const p=t??a.length;do{const c=f===0?d[0]??i.initialPageParam:Ke(i,o);if(f>0&&c==null)break;o=await M(o,c),f++}while(f<p)}return o};e.options.persister?e.fetchFn=()=>{var l,m;return(m=(l=e.options).persister)==null?void 0:m.call(l,P,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=P}}}function Ke(t,{pages:e,pageParams:s}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,s[i],s):void 0}function Pt(t,{pages:e,pageParams:s}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,s[0],s):void 0}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var ye,I,S,te,U,L,Ne,Ot=(Ne=class extends tt{constructor(e){super();h(this,U);h(this,ye);h(this,I);h(this,S);h(this,te);u(this,ye,e.client),this.mutationId=e.mutationId,u(this,S,e.mutationCache),u(this,I,[]),this.state=e.state||Ft(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){n(this,I).includes(e)||(n(this,I).push(e),this.clearGcTimeout(),n(this,S).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){u(this,I,n(this,I).filter(s=>s!==e)),this.scheduleGc(),n(this,S).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){n(this,I).length||(this.state.status==="pending"?this.scheduleGc():n(this,S).remove(this))}continue(){var e;return((e=n(this,te))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var d,o,f,P,g,O,v,x,Q,l,m,b,M,p,c,C,D,V,be,he;const s=()=>{F(this,U,L).call(this,{type:"continue"})},i={client:n(this,ye),meta:this.options.meta,mutationKey:this.options.mutationKey};u(this,te,et({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(w,J)=>{F(this,U,L).call(this,{type:"failed",failureCount:w,error:J})},onPause:()=>{F(this,U,L).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>n(this,S).canRun(this)}));const r=this.state.status==="pending",a=!n(this,te).canStart();try{if(r)s();else{F(this,U,L).call(this,{type:"pending",variables:e,isPaused:a}),await((o=(d=n(this,S).config).onMutate)==null?void 0:o.call(d,e,this,i));const J=await((P=(f=this.options).onMutate)==null?void 0:P.call(f,e,i));J!==this.state.context&&F(this,U,L).call(this,{type:"pending",context:J,variables:e,isPaused:a})}const w=await n(this,te).start();return await((O=(g=n(this,S).config).onSuccess)==null?void 0:O.call(g,w,e,this.state.context,this,i)),await((x=(v=this.options).onSuccess)==null?void 0:x.call(v,w,e,this.state.context,i)),await((l=(Q=n(this,S).config).onSettled)==null?void 0:l.call(Q,w,null,this.state.variables,this.state.context,this,i)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,w,null,e,this.state.context,i)),F(this,U,L).call(this,{type:"success",data:w}),w}catch(w){try{throw await((p=(M=n(this,S).config).onError)==null?void 0:p.call(M,w,e,this.state.context,this,i)),await((C=(c=this.options).onError)==null?void 0:C.call(c,w,e,this.state.context,i)),await((V=(D=n(this,S).config).onSettled)==null?void 0:V.call(D,void 0,w,this.state.variables,this.state.context,this,i)),await((he=(be=this.options).onSettled)==null?void 0:he.call(be,void 0,w,e,this.state.context,i)),w}finally{F(this,U,L).call(this,{type:"error",error:w})}}finally{n(this,S).runNext(this)}}},ye=new WeakMap,I=new WeakMap,S=new WeakMap,te=new WeakMap,U=new WeakSet,L=function(e){const s=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),j.batch(()=>{n(this,I).forEach(i=>{i.onMutationUpdate(e)}),n(this,S).notify({mutation:this,type:"updated",action:e})})},Ne);function Ft(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var k,R,pe,Be,Ct=(Be=class extends we{constructor(e={}){super();h(this,k);h(this,R);h(this,pe);this.config=e,u(this,k,new Set),u(this,R,new Map),u(this,pe,0)}build(e,s,i){const r=new Ot({client:e,mutationCache:this,mutationId:++ge(this,pe)._,options:e.defaultMutationOptions(s),state:i});return this.add(r),r}add(e){n(this,k).add(e);const s=ve(e);if(typeof s=="string"){const i=n(this,R).get(s);i?i.push(e):n(this,R).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(n(this,k).delete(e)){const s=ve(e);if(typeof s=="string"){const i=n(this,R).get(s);if(i)if(i.length>1){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}else i[0]===e&&n(this,R).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=ve(e);if(typeof s=="string"){const i=n(this,R).get(s),r=i==null?void 0:i.find(a=>a.state.status==="pending");return!r||r===e}else return!0}runNext(e){var i;const s=ve(e);if(typeof s=="string"){const r=(i=n(this,R).get(s))==null?void 0:i.find(a=>a!==e&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){j.batch(()=>{n(this,k).forEach(e=>{this.notify({type:"removed",mutation:e})}),n(this,k).clear(),n(this,R).clear()})}getAll(){return Array.from(n(this,k))}find(e){const s={exact:!0,...e};return this.getAll().find(i=>De(s,i))}findAll(e={}){return this.getAll().filter(s=>De(e,s))}notify(e){j.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return j.batch(()=>Promise.all(e.map(s=>s.continue().catch(A))))}},k=new WeakMap,R=new WeakMap,pe=new WeakMap,Be);function ve(t){var e;return(e=t.options.scope)==null?void 0:e.id}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var K,_e,St=(_e=class extends we{constructor(e={}){super();h(this,K);this.config=e,u(this,K,new Map)}build(e,s,i){const r=s.queryKey,a=s.queryHash??xe(r,s);let d=this.get(a);return d||(d=new wt({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(s),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(d)),d}add(e){n(this,K).has(e.queryHash)||(n(this,K).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=n(this,K).get(e.queryHash);s&&(e.destroy(),s===e&&n(this,K).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){j.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return n(this,K).get(e)}getAll(){return[...n(this,K).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(i=>qe(s,i))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(i=>qe(e,i)):s}notify(e){j.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){j.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){j.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},K=new WeakMap,_e);if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var y,B,_,ae,oe,z,ue,ce,ze,jt=(ze=class{constructor(t={}){h(this,y);h(this,B);h(this,_);h(this,ae);h(this,oe);h(this,z);h(this,ue);h(this,ce);u(this,y,t.queryCache||new St),u(this,B,t.mutationCache||new Ct),u(this,_,t.defaultOptions||{}),u(this,ae,new Map),u(this,oe,new Map),u(this,z,0)}mount(){ge(this,z)._++,n(this,z)===1&&(u(this,ue,Xe.subscribe(async t=>{t&&(await this.resumePausedMutations(),n(this,y).onFocus())})),u(this,ce,me.subscribe(async t=>{t&&(await this.resumePausedMutations(),n(this,y).onOnline())})))}unmount(){var t,e;ge(this,z)._--,n(this,z)===0&&((t=n(this,ue))==null||t.call(this),u(this,ue,void 0),(e=n(this,ce))==null||e.call(this),u(this,ce,void 0))}isFetching(t){return n(this,y).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return n(this,B).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=n(this,y).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=n(this,y).build(this,e),i=s.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Fe(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return n(this,y).findAll(t).map(({queryKey:e,state:s})=>{const i=s.data;return[e,i]})}setQueryData(t,e,s){const i=this.defaultQueryOptions({queryKey:t}),r=n(this,y).get(i.queryHash),a=r==null?void 0:r.state.data,d=rt(e,a);if(d!==void 0)return n(this,y).build(this,i).setData(d,{...s,manual:!0})}setQueriesData(t,e,s){return j.batch(()=>n(this,y).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=n(this,y).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=n(this,y);j.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=n(this,y);return j.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},i=j.batch(()=>n(this,y).findAll(t).map(r=>r.cancel(s)));return Promise.all(i).then(A).catch(A)}invalidateQueries(t,e={}){return j.batch(()=>(n(this,y).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},i=j.batch(()=>n(this,y).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let a=r.fetch(void 0,s);return s.throwOnError||(a=a.catch(A)),r.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(A)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=n(this,y).build(this,e);return s.isStaleByTime(Fe(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(A).catch(A)}fetchInfiniteQuery(t){return t.behavior=Ue(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(A).catch(A)}ensureInfiniteQueryData(t){return t.behavior=Ue(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return me.isOnline()?n(this,B).resumePausedMutations():Promise.resolve()}getQueryCache(){return n(this,y)}getMutationCache(){return n(this,B)}getDefaultOptions(){return n(this,_)}setDefaultOptions(t){u(this,_,t)}setQueryDefaults(t,e){n(this,ae).set(le(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...n(this,ae).values()],s={};return e.forEach(i=>{de(t,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(t,e){n(this,oe).set(le(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...n(this,oe).values()],s={};return e.forEach(i=>{de(t,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...n(this,_).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xe(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Me&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...n(this,_).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){n(this,y).clear(),n(this,B).clear()}},y=new WeakMap,B=new WeakMap,_=new WeakMap,ae=new WeakMap,oe=new WeakMap,z=new WeakMap,ue=new WeakMap,ce=new WeakMap,ze);if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}var xt=Ve.createContext(void 0),Mt=({client:t,children:e})=>(Ve.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Je.jsx(xt.Provider,{value:t,children:e}));if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}if(typeof window<"u"){const t={};globalThis.process??(globalThis.process={});const e=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,e),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}const Qt=new jt({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*30,retry:1,refetchOnWindowFocus:!1}}});function At({children:t}){return Je.jsx(Mt,{client:Qt,children:t})}export{At as R};
